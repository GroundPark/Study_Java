import java.util.*;
import java.io.*;
import java.net.*;

public class Network5_multichat_server {
	HashMap clients;
	
	public static void main(String[] args) {
		// TODO 여러 클라가 서버에 접속해 채팅하는 멀티채팅서버 예제
		// 클라에 대한것을 HashMap에 저장하고 처리함
			new Network5_multichat_server().start();
		}
	
		
		Network5_multichat_server(){
			clients = new HashMap();
			Collections.synchronizedMap(clients);
		}
		
		public void run() {
			ServerSocket serverSkt = null;
			Socket skt = null;
			
			try {
				serverSkt = new ServerSocket(7777);
				System.out.println(" Chatting Server is ready ");
				
				while(true) {
					skt = serverSkt.accept();
					System.out.println("["+skt.getInetAddress()+":"+skt.getPort()+"] connected ");
					ServerReceiver thread = new ServerReceiver(skt);
					thread.start();
				}
			}catch(Exception e) { e.printStackTrace(); }
		}

		class ServerReceiver extends Thread{
			Socket skt;
			DataInputStream DinputS;
			DataOutputStream DoutputS;
			
			ServerReceiver(Socket skt){
				this.skt = skt;
				try {
					DinputS = new DataInputStream(skt.getInputStream());
					DoutputS = new DataOutputStream(skt.getOutputStream());
				}catch(IOException e) {}
			}
			
			public void run() {
				String name = "";
				
				try {
					name = DinputS.readUTF();
					sendToAll("")
				}
			}
			
		}
		void sendToAll(String msg) {
			
		}
		
	
}
